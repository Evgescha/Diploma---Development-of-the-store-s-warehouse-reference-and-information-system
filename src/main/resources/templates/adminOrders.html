<!doctype html>
<html lang="en">

<head>
    <title>Заказы</title>
    <div th:replace="~{commons :: head}"></div>
</head>

<body>

<div th:replace="~{commons :: nav}"></div>

<section>
    <div class="container">
        <h2 class="text-center">Заявки пользователя по стутусам</h2>
    </div>
</section>

<section class="orders" id="orders">
    <div class="container">
        <div class="order-items">
            <h3 class="text-center">На складе</h3>
            <div class="row item p-3" th:each="entityM:${list}" th:if="${entityM.status.id==2}">
                <div class="h3 order-title"
                     th:text="'Заказ от:'+${entityM.dateOrder}+' на дату '+${entityM.dateDelivery}">Заказ на 25,25,2025
                </div>
                <div class="order-table" th:text="'Заказал: '+${entityM.creator.fio}">Пользователь</div>
                <div class="order-table" th:text="'Статус: '+${entityM.status}">status</div>
                <div class="order-table" th:text="'Перевозчик: '+${entityM.transporter}">Stol</div>
                <div class="order-table" th:text="'Сумма заказа: '+${#aggregates.sum(entityM.orderElements.![product.price])}">
                    Summ
                </div>
                <div class="order-buttons">
                    <a class="btn btn-primary" th:href="'/admin/confirmOrder/'+${entityM.id}">Передать заказ
                        перевозчику</a>
                    <a class="btn btn-primary" th:href="'/admin/deleteOrder/'+${entityM.id}">Удалить бронь</a>
                </div>

                <div class="order-food">
                    <div class="order-food-item">
                        <table class="table table-striped table-responsive-md">
                            <thead>
                            <tr>
                                <th>Товар</th>
                                <th>Цена</th>
                                <th>Количество</th>
                                <th>Сумма</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="entity1 : ${entityM.orderElements}">
                                <td th:text="${entity1.product.name}"></td>
                                <td th:text="${entity1.product.price}"></td>
                                <td th:text="${entity1.count}"></td>
                                <td th:text="${entity1.product.price * entity1.count}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="orders" id="orders">
    <div class="container">
        <div class="order-items">
            <h3 class="text-center">У перевозчика</h3>
            <div class="row item p-3" th:each="entityM:${list}" th:if="${entityM.status.id==3}">
                <div class="h3 order-title"
                     th:text="'Заказ от:'+${entityM.dateOrder}+' на дату '+${entityM.dateDelivery}">Заказ на 25,25,2025
                </div>
                <div class="order-table" th:text="'Заказал: '+${entityM.creator.fio}">Пользователь</div>
                <div class="order-table" th:text="'Статус: '+${entityM.status}">status</div>
                <div class="order-table" th:text="'Перевозчик: '+${entityM.transporter}">Stol</div>
                <div class="order-table" th:text="'Сумма заказа: '+${#aggregates.sum(entityM.orderElements.![product.price])}">
                    Summ
                </div>

                <div class="order-buttons">
                    <a class="btn btn-primary" th:href="'/admin/completeOrder/'+${entityM.id}">Заказ доставлен</a>
                    <a class="btn btn-primary" th:href="'/admin/deleteOrder/'+${entityM.id}">Удалить бронь</a>
                </div>

                <div class="order-food">
                    <div class="order-food-item">
                        <table class="table table-striped table-responsive-md">
                            <thead>
                            <tr>
                                <th>Товар</th>
                                <th>Цена</th>
                                <th>Количество</th>
                                <th>Сумма</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="entity1 : ${entityM.orderElements}">
                                <td th:text="${entity1.product.name}"></td>
                                <td th:text="${entity1.product.price}"></td>
                                <td th:text="${entity1.count}"></td>
                                <td th:text="${entity1.product.price * entity1.count}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="orders" id="orders">
    <div class="container">
        <div class="order-items">
            <h3 class="text-center">Доставленные</h3>
            <div class="row item p-3" th:each="entityM:${list}" th:if="${entityM.status.id==4}">
                <div class="h3 order-title"
                     th:text="'Заказ от:'+${entityM.dateOrder}+' на дату '+${entityM.dateDelivery}">Заказ на 25,25,2025
                </div>
                <div class="order-table" th:text="'Заказал: '+${entityM.creator.fio}">Пользователь</div>
                <div class="order-table" th:text="'Статус: '+${entityM.status}">status</div>
                <div class="order-table" th:text="'Перевозчик: '+${entityM.transporter}">Stol</div>
                <div class="order-table" th:text="'Сумма заказа: '+${#aggregates.sum(entityM.orderElements.![price])}">
                    Summ
                </div>
                <div class="order-buttons">
                    <a class="btn btn-primary" th:href="'/admin/deleteOrder/'+${entityM.id}">Удалить бронь</a>
                </div>

                <div class="order-food">
                    <div class="order-food-item">
                        <table class="table table-striped table-responsive-md">
                            <thead>
                            <tr>
                                <th> Товар</th>
                                <th>Количество</th>
                                <th>Сумма</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="entity1 : ${entityM.orderElements}">
                                <td th:text="${entity1.product.name}"></td>
                                <td th:text="${entity1.product.price}"></td>
                                <td th:text="${entity1.count}"></td>
                                <td th:text="${entity1.product.price * entity1.count}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

</body>

</html>